<!-- Page Content -->
<div class="container">

  <!-- Page Heading -->
  <h1 class="my-4">Movies</h1>

  <div class="search-container">
    <input type="search" [(ngModel)]="search" (keydown.enter)="searchMovies()" placeholder="Search for a movie"
      (click)="loadMovies()" />
    <button type="button" class="btn btn-primary" (click)="searchMovies()">Search</button>
  </div>

  <br />

  <!-- Pagination -->
  <div class="overflow-auto d-flex flex-sm-row flex-column justify-content-center">
    <ngb-pagination *ngIf="maxResults" [collectionSize]="maxResults" [(page)]="pageNumber" [maxSize]="15"
      [pageSize]="20" (pageChange)="paginateMovies()" [ellipses]="false" [boundaryLinks]="true"></ngb-pagination>
  </div>

  <div class="row">
    <ng-container *ngIf="movies.length; else emptyMovies">
      <div *ngFor="let movie of movies" class="col-lg-4 col-sm-6 mb-4">
        <div class="card h-100">
          <a [routerLink]="['/movie/',movie.id]"><img class="card-img-top"
              src="https://image.tmdb.org/t/p/original{{movie.posterPath}}" alt=""></a>
          <div class="card-body">
            <h4 class="card-title">
              <div class="row">
                <div class="col-md-8">
                  <a [routerLink]="['/movie/',movie.id]">{{movie.title}}</a>
                </div>
                <div class="col-md-4">
                  <circle-progress *ngIf="movie.voteAverage != 0; else elseBlock" [percent]="movie.voteAverage * 10"
                    [unitsFontSize]="10" [titleFontSize]="10" [radius]="25" [outerStrokeWidth]="5"
                    [innerStrokeWidth]="5" [outerStrokeColor]="movie.voteAverage | borderClass"></circle-progress>
                  <ng-template #elseBlock>
                    <circle-progress [unitsFontSize]="10" [titleFontSize]="10" title="N/A" [innerStrokeWidth]="5"
                      [radius]="25" [outerStrokeWidth]="6" [showUnits]="false"></circle-progress>
                  </ng-template>
                </div>
              </div>
            </h4>
            <p class="card-text">{{movie.overview}}</p>
          </div>
        </div>
      </div>
    </ng-container>

    <ng-template #emptyMovies>
      <div class="alert alert-warning" style="width: 100%;" role="alert">
        No movies found
      </div>
    </ng-template>

  </div>
  <!-- /.row -->

  <!-- Pagination -->
  <div class="overflow-auto overflow-auto d-flex flex-sm-row flex-column justify-content-center">
    <ngb-pagination *ngIf="maxResults" [collectionSize]="maxResults" [(page)]="pageNumber" [maxSize]="15"
      [pageSize]="20" (pageChange)="paginateMovies()" [ellipses]="false" [boundaryLinks]="true"></ngb-pagination>
  </div>
</div>